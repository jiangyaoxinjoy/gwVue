(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6155ce4a"],{"02c6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Select",{style:{width:t.width+"px",height:"32px"},attrs:{disabled:1==t.companyList.length},on:{"on-change":t.changeCom},model:{value:t.companyId,callback:function(e){t.companyId=e},expression:"companyId"}},[1!=t.companyList.length?n("Option",{attrs:{value:0}},[t._v("全部")]):t._e(),t._l(t.companyList,function(e){return n("Option",{key:e.Id,attrs:{value:e.Id}},[t._v(t._s(e.name))])})],2)},i=[],s=(n("d4d5"),{name:"Companyselect",props:{companyList:Array,selectCompany:Number,width:{default:200,type:Number}},computed:{companyId:{get:function(){return this.selectCompany},set:function(){}}},methods:{changeCom:function(t){this.$emit("changeComId",t)}}}),o=s,c=n("17cc"),d=Object(c["a"])(o,a,i,!1,null,null,null),r=d.exports;n.d(e,"a",function(){return r})},"0857":function(t,e,n){"use strict";n("a0e0");var a=n("a013"),i=n("f425"),s=n("dad2"),o="toString",c=/./[o],d=function(t){n("e5ef")(RegExp.prototype,o,t,!0)};n("b6f1")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?d(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?i.call(t):void 0)}):c.name!=o&&d(function(){return c.call(this)})},4570:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{ref:"currentRowTable",attrs:{columns:t.columns,data:t.userData,"highlight-row":"",height:t.tableHeight},scopedSlots:t._u([{key:"authority",fn:function(e){var a=e.row;e.index;return t._l(a.authName,function(e){return n("Tag",{key:e,attrs:{color:"warning"}},[t._v(t._s(e))])})}},{key:"action",fn:function(e){var a=e.row;e.index;return[n("Button",{staticClass:"tBtn",attrs:{type:-1==a.status?"default":"info",size:"small"},on:{click:function(e){return t.changeRowState(a)}}},[t._v(t._s(-1===a.status?"禁用":"正常"))]),n("Button",{staticClass:"tBtn",attrs:{type:"error",size:"small"},on:{click:function(e){return t.handleCurrenRow(a)}}},[t._v("修改")])]}}])},[n("template",{slot:"header"},[n("Button",{staticClass:"tbHBtn",attrs:{type:"primary",icon:"md-add-circle"},on:{click:t.handleAddPerson}},[n("span",[t._v("添加人员")])]),n("Companyselect",{attrs:{companyList:t.companyList,selectCompany:t.selectCompany},on:{changeComId:t.changeCom}})],1)],2),t.ifEdit?[n("editModal",{attrs:{originData:t.selectRow,modal:t.editshow},on:{State:t.changeEditState,submit:t.handleEditSubmit}})]:t._e(),t.ifAdd?[n("addModal",{attrs:{modal:t.addshow},on:{addState:t.changeAddState,addSubmit:t.handleAddSubmit}})]:t._e()],2)},i=[],s=(n("7364"),n("0857"),n("e20c")),o=n("6e6d"),c=n("591a"),d=n("02c6"),r=o["default"].component("addModal",function(t){n.e("chunk-2d0e925c").then(function(){var e=[n("8bfb")];t.apply(null,e)}.bind(this)).catch(n.oe)}),u=o["default"].component("editModal",function(t){n.e("chunk-2d0b9db3").then(function(){var e=[n("3572")];t.apply(null,e)}.bind(this)).catch(n.oe)}),h={components:{Companyselect:d["a"],addModal:r,editModal:u},data:function(){return{modalState:"",addshow:!1,editshow:!1,ifAdd:!1,ifEdit:!1,selectRow:"",modalAdd:!1,pageSize:10,selectCompany:0,columns:[{title:"真实姓名",key:"real_name",width:100},{title:"昵称",key:"name",width:100},{title:"公司名称",key:"company",width:160},{title:"权限",slot:"authority",align:"left",minWidth:250},{title:"操作",slot:"action",width:160,align:"center"}],userData:[]}},computed:Object(s["a"])({dataTotal:function(){return this.userData.length}},Object(c["e"])({authList:function(t){return t.user.authList},tableHeight:function(t){return t.user.windowH-60},companyList:function(t){return t.user.companyList},comId:function(t){return t.user.comId}})),created:function(){this.initPage()},methods:Object(s["a"])({},Object(c["b"])(["getCompanyList","getUserList","addUser","editUser"]),{initPage:function(){0===this.companyList.length&&this.getCompanyList(),1!==this.comId&&(this.selectCompany=this.comId),this.initUserList()},changeCom:function(t){this.selectCompany=t,this.initUserList()},initUserList:function(){var t=this;this.getUserList({companyId:this.selectCompany}).then(function(e){t.userData=null!==e?e:[]})},handleCurrenRow:function(t){this.selectRow=t,0===this.authList.length&&this.$store.dispatch("getauthList"),this.ifEdit=!0,this.editshow=!0},handleAddPerson:function(){this.modalState="new",this.addshow=!0,this.ifAdd=!0,0===this.authList.length&&this.$store.dispatch("getauthList")},handleAddSubmit:function(t){var e=this,n=JSON.parse(JSON.stringify(t));n.authority=n.authority.toString(),this.addUser(n).then(function(t){0===t.status?(e.$Message.success("添加成功"),e.initUserList(),e.addshow=!1):e.$Message.error(t.msg)})},handleEditSubmit:function(t){var e=this,n=JSON.parse(JSON.stringify(t));n.authority=n.authority.toString(),this.editUser(n).then(function(t){0===t.status?(e.$Message.success("编辑成功"),n.id===e.$store.state.user.userId&&e.$store.dispatch("getUserInfo"),e.initUserList(),e.editshow=!1):e.$Message.error(t.msg)})},changeRowState:function(t){var e={};e.id=t.Id,e.name=t.name,e.phone=t.phone,e.company_id=t.company_id,e.status=-1===t.status?1:-1,e.authority=t.auth_ids,this.handleEditSubmit(e)},changeAddState:function(t){this.addshow=t},changeEditState:function(t){this.editshow=t}})},l=h,f=(n("f4d7"),n("17cc")),m=Object(f["a"])(l,a,i,!1,null,"adfd7b40",null);e["default"]=m.exports},"4ed6":function(t,e,n){},a0e0:function(t,e,n){n("dad2")&&"g"!=/./g.flags&&n("ddf7").f(RegExp.prototype,"flags",{configurable:!0,get:n("f425")})},f4d7:function(t,e,n){"use strict";var a=n("4ed6"),i=n.n(a);i.a}}]);